<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Careers Admin | Staffona</title>
<meta name="robots" content="noindex,nofollow">
<link rel="icon" type="image/png" href="Favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{--navy:#0B1F3A;--gold:#C8973A;--glt:#E0AC56;--off:#F8F7F5;--bd:#E4E2DC;--sl:#475569;--tx:#1E293B;--r:8px;--rm:12px;--rx:20px}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'DM Sans',system-ui,sans-serif;background:#0a1628;color:#fff;min-height:100vh;-webkit-font-smoothing:antialiased}
.topbar{background:#06101E;border-bottom:1px solid rgba(255,255,255,.08);padding:14px 28px;display:flex;align-items:center;justify-content:space-between}
.tb-brand{display:flex;align-items:center;gap:10px}
.tb-brand img{height:36px;filter:brightness(0) invert(1)}
.tb-brand-fb{font-family:'Playfair Display',serif;font-size:18px;font-weight:700;color:#fff;display:none}.tb-brand-fb em{color:var(--gold);font-style:normal}
.tb-title{font-size:12px;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.3)}
.tb-r{display:flex;align-items:center;gap:12px}
.tb-btn{padding:7px 14px;font-size:13px;font-weight:600;border-radius:var(--r);cursor:pointer;border:none;transition:all .2s}
.btn-gold{background:var(--gold);color:var(--navy)}.btn-gold:hover{background:var(--glt)}
.btn-outline{background:transparent;border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.6)}.btn-outline:hover{border-color:rgba(255,255,255,.5);color:#fff}
.main{padding:32px 28px;max-width:1100px;margin:0 auto}
.stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:32px}
.stat-card{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.09);border-radius:var(--rm);padding:20px}
.stat-n{font-family:'Playfair Display',serif;font-size:36px;font-weight:800;color:#fff;line-height:1}
.stat-l{font-size:12px;color:rgba(255,255,255,.4);margin-top:4px}
.stat-card.gold{background:rgba(200,151,58,.1);border-color:rgba(200,151,58,.3)}
.stat-card.gold .stat-n{color:var(--gold)}
.section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.sh-t{font-size:16px;font-weight:700;color:#fff}
.sh-d{font-size:12.5px;color:rgba(255,255,255,.38);margin-top:2px}
.filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:18px}
.flt-btn{padding:5px 13px;border-radius:100px;font-size:12.5px;font-weight:600;cursor:pointer;border:1px solid rgba(255,255,255,.15);background:transparent;color:rgba(255,255,255,.5);transition:all .2s}
.flt-btn.on,.flt-btn:hover{background:rgba(200,151,58,.15);border-color:rgba(200,151,58,.4);color:var(--gold)}
.table-wrap{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:var(--rx);overflow:hidden}
.tbl{width:100%;border-collapse:collapse}
.tbl th{padding:11px 16px;text-align:left;font-size:11px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:rgba(255,255,255,.28);border-bottom:1px solid rgba(255,255,255,.07);background:rgba(0,0,0,.2)}
.tbl td{padding:13px 16px;font-size:13.5px;border-bottom:1px solid rgba(255,255,255,.05);vertical-align:middle}
.tbl tr:last-child td{border-bottom:none}
.tbl tr:hover td{background:rgba(255,255,255,.02)}
.app-name{font-weight:600;color:#fff}
.app-email{font-size:12px;color:rgba(255,255,255,.44);margin-top:2px}
.app-role{color:rgba(255,255,255,.6)}
.app-dept{display:inline-block;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600;background:rgba(200,151,58,.12);color:var(--gold)}
.app-date{font-size:12px;color:rgba(255,255,255,.38)}
.status-badge{display:inline-flex;align-items:center;gap:5px;padding:3px 10px;border-radius:100px;font-size:11.5px;font-weight:600}
.s-new{background:rgba(59,130,246,.15);color:#93c5fd}
.s-review{background:rgba(234,179,8,.12);color:#fbbf24}
.s-interview{background:rgba(16,185,129,.12);color:#6ee7b7}
.s-hired{background:rgba(200,151,58,.15);color:var(--gold)}
.s-rejected{background:rgba(239,68,68,.1);color:#fca5a5}
.act-btn{padding:5px 10px;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;border:none;margin-right:4px;transition:all .2s}
.view-btn{background:rgba(255,255,255,.07);color:rgba(255,255,255,.6)}.view-btn:hover{background:rgba(255,255,255,.12);color:#fff}
.del-btn{background:rgba(239,68,68,.1);color:#fca5a5}.del-btn:hover{background:rgba(239,68,68,.2)}
/* Modal */
.modal-bg{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:1000;align-items:center;justify-content:center;padding:20px}
.modal-bg.open{display:flex}
.modal{background:#0f1e35;border:1px solid rgba(255,255,255,.1);border-radius:var(--rx);padding:32px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;position:relative}
.modal-close{position:absolute;top:16px;right:16px;background:none;border:none;color:rgba(255,255,255,.4);cursor:pointer;font-size:20px;line-height:1;padding:4px}
.modal-close:hover{color:#fff}
.modal h2{font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:#fff;margin-bottom:20px}
.det-row{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px}
.det-item{background:rgba(255,255,255,.04);border-radius:var(--r);padding:12px}
.det-label{font-size:11px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:rgba(255,255,255,.28);margin-bottom:4px}
.det-value{font-size:14px;color:#fff}
.det-full{grid-column:1/-1}
.sel-status{width:100%;padding:8px 12px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.15);border-radius:var(--r);color:#fff;font-size:13.5px;outline:none}
.sel-status option{background:#0f1e35}
.save-btn{width:100%;padding:11px;background:var(--gold);color:var(--navy);border:none;border-radius:var(--r);font-size:14px;font-weight:700;cursor:pointer;margin-top:14px}
.save-btn:hover{background:var(--glt)}
/* Manual add form */
.add-form{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:var(--rx);padding:24px;margin-bottom:32px;display:none}
.add-form.open{display:block}
.add-form h3{font-size:15px;font-weight:700;color:#fff;margin-bottom:18px}
.fg{margin-bottom:12px}
.fl{display:block;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:rgba(255,255,255,.36);margin-bottom:5px}
.fi,.fsel{width:100%;padding:9px 12px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:var(--r);color:#fff;font-size:13.5px;outline:none}
.fi:focus,.fsel:focus{border-color:var(--gold)}
.fi::placeholder{color:rgba(255,255,255,.3)}
.fsel option{background:#0f1e35}
.fg2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.empty-state{text-align:center;padding:56px 20px}
.empty-icon{font-size:40px;margin-bottom:12px}
.empty-t{font-size:16px;font-weight:600;color:rgba(255,255,255,.5);margin-bottom:6px}
.empty-d{font-size:13.5px;color:rgba(255,255,255,.28)}
.note-banner{background:rgba(200,151,58,.08);border:1px solid rgba(200,151,58,.2);border-radius:var(--rm);padding:14px 18px;font-size:13px;color:rgba(255,255,255,.6);margin-bottom:24px;line-height:1.6}
.note-banner strong{color:var(--gold)}
@media(max-width:768px){.stats-row{grid-template-columns:1fr 1fr}.tbl th:nth-child(3),.tbl td:nth-child(3),.tbl th:nth-child(5),.tbl td:nth-child(5){display:none}.det-row{grid-template-columns:1fr}}
</style>
</head>
<body>

<div class="topbar">
  <div class="tb-brand">
    <img src="Logo.png" alt="Staffona" onerror="this.style.display='none';this.nextElementSibling.style.display='block'">
    <span class="tb-brand-fb">Staff<em>ona</em></span>
    <span class="tb-title">Careers Dashboard</span>
  </div>
  <div class="tb-r">
    <button class="tb-btn btn-outline" onclick="toggleAddForm()">+ Add Application</button>
    <button class="tb-btn btn-outline" onclick="exportData()">Export CSV</button>
    <button class="tb-btn btn-outline" onclick="if(confirm('Clear all data?')) clearAll()">Clear All</button>
    <a href="careers.html" class="tb-btn btn-outline">‚Üê Public Page</a>
  </div>
</div>

<div class="main">
  <div class="note-banner">
    <strong>‚ÑπÔ∏è How this works:</strong> Applications submitted via the careers form are emailed to info@staffona.com via Formspree. To track them here, use the <strong>"+ Add Application"</strong> button to log each one manually. All data is stored locally in your browser ‚Äî <strong>export regularly</strong> to back up.
  </div>

  <div class="stats-row" id="statsRow">
    <div class="stat-card"><div class="stat-n" id="st-total">0</div><div class="stat-l">Total Applications</div></div>
    <div class="stat-card gold"><div class="stat-n" id="st-new">0</div><div class="stat-l">New (Unreviewed)</div></div>
    <div class="stat-card"><div class="stat-n" id="st-interview">0</div><div class="stat-l">In Interview</div></div>
    <div class="stat-card"><div class="stat-n" id="st-hired">0</div><div class="stat-l">Hired</div></div>
  </div>

  <!-- Add form -->
  <div class="add-form" id="addForm">
    <h3>Log New Application</h3>
    <div class="fg2">
      <div class="fg"><label class="fl">First Name *</label><input class="fi" id="af-fn" placeholder="Ahmed"></div>
      <div class="fg"><label class="fl">Last Name *</label><input class="fi" id="af-ln" placeholder="Hassan"></div>
    </div>
    <div class="fg2">
      <div class="fg"><label class="fl">Email *</label><input class="fi" id="af-em" type="email" placeholder="ahmed@email.com"></div>
      <div class="fg"><label class="fl">Phone</label><input class="fi" id="af-ph" placeholder="+20..."></div>
    </div>
    <div class="fg2">
      <div class="fg"><label class="fl">Role Applied For *</label><input class="fi" id="af-role" placeholder="Software Engineer"></div>
      <div class="fg"><label class="fl">Department</label>
        <select class="fsel" id="af-dept">
          <option value="Tech">Tech &amp; Engineering</option>
          <option value="Support">Customer Support</option>
          <option value="Finance">Finance &amp; Accounting</option>
          <option value="Operations">Operations</option>
          <option value="HR">HR &amp; Admin</option>
          <option value="Sales">Sales &amp; BD</option>
          <option value="Other">Other</option>
        </select>
      </div>
    </div>
    <div class="fg2">
      <div class="fg"><label class="fl">Experience</label><input class="fi" id="af-exp" placeholder="3 years"></div>
      <div class="fg"><label class="fl">Location</label><input class="fi" id="af-loc" placeholder="Alexandria"></div>
    </div>
    <div class="fg"><label class="fl">Cover Letter / Notes</label><input class="fi" id="af-notes" placeholder="Key notes from application..."></div>
    <div style="display:flex;gap:10px;margin-top:4px">
      <button class="tb-btn btn-gold" onclick="addApplication()" style="flex:1;padding:10px">Save Application</button>
      <button class="tb-btn btn-outline" onclick="toggleAddForm()">Cancel</button>
    </div>
  </div>

  <!-- Table -->
  <div>
    <div class="section-head">
      <div><div class="sh-t">Applications</div><div class="sh-d" id="app-count">0 total</div></div>
    </div>
    <div class="filters">
      <button class="flt-btn on" onclick="filterApps('all',this)">All</button>
      <button class="flt-btn" onclick="filterApps('New',this)">üîµ New</button>
      <button class="flt-btn" onclick="filterApps('Under Review',this)">üü° Review</button>
      <button class="flt-btn" onclick="filterApps('Interview',this)">üü¢ Interview</button>
      <button class="flt-btn" onclick="filterApps('Hired',this)">‚≠ê Hired</button>
      <button class="flt-btn" onclick="filterApps('Rejected',this)">‚ùå Rejected</button>
    </div>
    <div class="table-wrap">
      <table class="tbl">
        <thead><tr>
          <th>Applicant</th>
          <th>Role</th>
          <th>Dept</th>
          <th>Status</th>
          <th>Date</th>
          <th>Actions</th>
        </tr></thead>
        <tbody id="appTbody"></tbody>
      </table>
      <div class="empty-state" id="emptyState">
        <div class="empty-icon">üì≠</div>
        <div class="empty-t">No applications yet</div>
        <div class="empty-d">Add applications manually using the button above, or wait for submissions via the careers form.</div>
      </div>
    </div>
  </div>
</div>

<!-- Detail modal -->
<div class="modal-bg" id="modal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">‚úï</button>
    <h2 id="m-name">Applicant Name</h2>
    <div class="det-row">
      <div class="det-item"><div class="det-label">Email</div><div class="det-value" id="m-email"></div></div>
      <div class="det-item"><div class="det-label">Phone</div><div class="det-value" id="m-phone"></div></div>
      <div class="det-item"><div class="det-label">Role</div><div class="det-value" id="m-role"></div></div>
      <div class="det-item"><div class="det-label">Department</div><div class="det-value" id="m-dept"></div></div>
      <div class="det-item"><div class="det-label">Experience</div><div class="det-value" id="m-exp"></div></div>
      <div class="det-item"><div class="det-label">Location</div><div class="det-value" id="m-loc"></div></div>
      <div class="det-item det-full"><div class="det-label">Notes</div><div class="det-value" id="m-notes" style="white-space:pre-wrap"></div></div>
      <div class="det-item det-full"><div class="det-label">Update Status</div>
        <select class="sel-status" id="m-status">
          <option value="New">New</option>
          <option value="Under Review">Under Review</option>
          <option value="Interview">Interview</option>
          <option value="Hired">Hired</option>
          <option value="Rejected">Rejected</option>
        </select>
      </div>
    </div>
    <button class="save-btn" onclick="saveStatus()">Save Status</button>
  </div>
</div>

<script>
const STORE_KEY = 'sf-careers-v3';
let apps = [], currentFilter = 'all', editId = null;

function load(){ try { apps = JSON.parse(localStorage.getItem(STORE_KEY)||'[]'); } catch(e){ apps=[]; } render(); }
function save(){ try { localStorage.setItem(STORE_KEY, JSON.stringify(apps)); } catch(e){ alert('Storage full ‚Äî please export and clear data.'); } }

function toggleAddForm(){
  const f = document.getElementById('addForm');
  f.classList.toggle('open');
  if(f.classList.contains('open')) document.getElementById('af-fn').focus();
}

function addApplication(){
  const fn = document.getElementById('af-fn').value.trim();
  const ln = document.getElementById('af-ln').value.trim();
  const em = document.getElementById('af-em').value.trim();
  const role = document.getElementById('af-role').value.trim();
  if(!fn||!em||!role){ alert('First name, email, and role are required.'); return; }
  const app = {
    id: Date.now(),
    firstName: fn, lastName: ln, email: em,
    phone: document.getElementById('af-ph').value.trim(),
    role, dept: document.getElementById('af-dept').value,
    experience: document.getElementById('af-exp').value.trim(),
    location: document.getElementById('af-loc').value.trim(),
    notes: document.getElementById('af-notes').value.trim(),
    status: 'New',
    date: new Date().toISOString()
  };
  apps.unshift(app);
  save();
  // Clear form
  ['af-fn','af-ln','af-em','af-ph','af-role','af-exp','af-loc','af-notes'].forEach(id => document.getElementById(id).value='');
  document.getElementById('addForm').classList.remove('open');
  render();
}

function filterApps(f, btn){
  currentFilter = f;
  document.querySelectorAll('.flt-btn').forEach(b => b.classList.remove('on'));
  btn.classList.add('on');
  render();
}

const STATUS_CLASS = {'New':'s-new','Under Review':'s-review','Interview':'s-interview','Hired':'s-hired','Rejected':'s-rejected'};

function render(){
  const filtered = currentFilter === 'all' ? apps : apps.filter(a => a.status === currentFilter);
  const tbody = document.getElementById('appTbody');
  const empty = document.getElementById('emptyState');
  document.getElementById('app-count').textContent = `${filtered.length} of ${apps.length} total`;
  // Stats
  document.getElementById('st-total').textContent = apps.length;
  document.getElementById('st-new').textContent = apps.filter(a=>a.status==='New').length;
  document.getElementById('st-interview').textContent = apps.filter(a=>a.status==='Interview').length;
  document.getElementById('st-hired').textContent = apps.filter(a=>a.status==='Hired').length;
  
  if(!filtered.length){ tbody.innerHTML=''; empty.style.display='block'; return; }
  empty.style.display='none';
  tbody.innerHTML = filtered.map(a => {
    const sc = STATUS_CLASS[a.status]||'s-new';
    const dt = new Date(a.date).toLocaleDateString('en-GB',{day:'2-digit',month:'short',year:'numeric'});
    return `<tr>
      <td><div class="app-name">${esc(a.firstName)} ${esc(a.lastName)}</div><div class="app-email">${esc(a.email)}</div></td>
      <td class="app-role">${esc(a.role)}</td>
      <td><span class="app-dept">${esc(a.dept)}</span></td>
      <td><span class="status-badge ${sc}">${esc(a.status)}</span></td>
      <td class="app-date">${dt}</td>
      <td><button class="act-btn view-btn" onclick="openModal(${a.id})">View</button><button class="act-btn del-btn" onclick="deleteApp(${a.id})">Del</button></td>
    </tr>`;
  }).join('');
}

function esc(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function openModal(id){
  const a = apps.find(x=>x.id===id); if(!a) return;
  editId = id;
  document.getElementById('m-name').textContent = `${a.firstName} ${a.lastName}`;
  document.getElementById('m-email').textContent = a.email||'‚Äî';
  document.getElementById('m-phone').textContent = a.phone||'‚Äî';
  document.getElementById('m-role').textContent = a.role||'‚Äî';
  document.getElementById('m-dept').textContent = a.dept||'‚Äî';
  document.getElementById('m-exp').textContent = a.experience||'‚Äî';
  document.getElementById('m-loc').textContent = a.location||'‚Äî';
  document.getElementById('m-notes').textContent = a.notes||'‚Äî';
  document.getElementById('m-status').value = a.status;
  document.getElementById('modal').classList.add('open');
}
function closeModal(){ document.getElementById('modal').classList.remove('open'); editId=null; }
function saveStatus(){
  const a = apps.find(x=>x.id===editId); if(!a) return;
  a.status = document.getElementById('m-status').value;
  save(); render(); closeModal();
}
function deleteApp(id){ if(!confirm('Delete this application?')) return; apps=apps.filter(x=>x.id!==id); save(); render(); }
function clearAll(){ apps=[]; save(); render(); }

function exportData(){
  if(!apps.length){ alert('No data to export.'); return; }
  const headers = ['ID','First Name','Last Name','Email','Phone','Role','Department','Experience','Location','Status','Date','Notes'];
  const rows = apps.map(a => [a.id,a.firstName,a.lastName,a.email,a.phone,a.role,a.dept,a.experience,a.location,a.status,new Date(a.date).toLocaleDateString('en-GB'),a.notes].map(v=>`"${(v||'').toString().replace(/"/g,'""')}"`).join(','));
  const csv = [headers.join(','),...rows].join('\n');
  const blob = new Blob([csv],{type:'text/csv'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = `staffona-careers-${new Date().toISOString().slice(0,10)}.csv`;
  a.click();
}

document.getElementById('modal').addEventListener('click', function(e){ if(e.target===this) closeModal(); });
document.addEventListener('keydown', e => { if(e.key==='Escape') closeModal(); });

load();
</script>
</body>
</html>
